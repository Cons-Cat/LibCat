// -*- mode: c++ -*-
// vim: set ft=cpp:
#pragma once

#include <linux>

namespace std {

struct Thread {
    Any id;
    void* p_stack;
    ssize stack_size;

    // This is platform-specific hidden code.
  private:
    nix::Process process;
  public:
    Thread() = default;
    Thread(Thread const&) = delete;

    auto create(auto& allocator, ssize const initial_stack_size,
                auto const& function, void* p_arguments_struct) -> Result<> {
        return this->process.create(allocator, initial_stack_size, function,
                                    p_arguments_struct);
    }

    auto join() const -> Result<> {
        return this->process.wait();
    }
};

}  // namespace std
